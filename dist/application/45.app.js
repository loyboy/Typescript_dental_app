(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[45],{

/***/ "./src/modules/settings/components/page.settings.tsx":
/*!***********************************************************!*\
  !*** ./src/modules/settings/components/page.settings.tsx ***!
  \***********************************************************/
/*! exports provided: SettingsPage, SettingInputComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SettingsPage\", function() { return SettingsPage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SettingInputComponent\", function() { return SettingInputComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _common_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @common-components */ \"./src/common-components/index.ts\");\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @core */ \"./src/core/index.ts\");\n/* harmony import */ var _modules__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @modules */ \"./src/modules/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @utils */ \"./src/utils/index.ts\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/lib/mobx.module.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/index.module.js\");\n/* harmony import */ var office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! office-ui-fabric-react */ \"./node_modules/office-ui-fabric-react/lib/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! papaparse */ \"./node_modules/papaparse/papaparse.min.js\");\n/* harmony import */ var papaparse__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(papaparse__WEBPACK_IMPORTED_MODULE_9__);\n\n\n\n\n\n\n\n\n\n\nlet SettingsPage = class SettingsPage extends react__WEBPACK_IMPORTED_MODULE_8__[\"Component\"] {\n    constructor() {\n        super(...arguments);\n        this.triggerUpdate = 0;\n        this.inputEl = null;\n        this.loading = false;\n        this.doExport = () => {\n            const isConfirmed = confirm(\"Are you sure you want to export this Patient data?\");\n            if (isConfirmed) {\n                let patient = _modules__WEBPACK_IMPORTED_MODULE_3__[\"patients\"].list;\n                let newpat = patient.map((pat) => {\n                    return {\n                        Id: pat._id,\n                        Name: pat.name,\n                        \"Birth Year\": pat.birthYear,\n                        Gender: pat.gender,\n                        Tags: pat.tags,\n                        Address: pat.address,\n                        Email: pat.email,\n                        Phone: pat.phone,\n                        Labels: pat.labels,\n                        History: JSON.stringify(pat.medicalHistory),\n                        Gallery: JSON.stringify(pat.gallery),\n                        Diagnosis: JSON.stringify(pat.diagnosis),\n                        Age: pat.age,\n                        Appointments: JSON.stringify(pat.appointments),\n                        \"Last Appointments\": JSON.stringify(pat.lastAppointment),\n                        \"Next Appointments\": JSON.stringify(pat.nextAppointment),\n                        \"Primary Teeth\": pat.nextAppointment,\n                        \"Permanent teeth\": pat.hasPrimaryTeeth,\n                        \"Total Payments\": pat.totalPayments,\n                        Outstanding: pat.outstandingAmount,\n                        \"Over Paid Amount\": pat.overpaidAmount,\n                        \"Difference Amount\": pat.differenceAmount,\n                    };\n                });\n                var csv = Object(papaparse__WEBPACK_IMPORTED_MODULE_9__[\"unparse\"])(newpat);\n                var blob = new Blob([csv]);\n                var a = window.document.createElement(\"a\");\n                a.href = window.URL.createObjectURL(blob);\n                a.download = \"patients.csv\";\n                document.body.appendChild(a);\n                a.click(); // IE: \"Access is denied\"; see: https://connect.microsoft.com/IE/feedback/details/797361/ie-10-treats-blob-url-as-cross-origin-and-denies-access\n                document.body.removeChild(a);\n            }\n        };\n    }\n    get canEdit() {\n        return _core__WEBPACK_IMPORTED_MODULE_2__[\"user\"].currentUser.canEditSettings;\n    }\n    componentWillMount() {\n        setTimeout(() => _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].updateDropboxBackups(), _utils__WEBPACK_IMPORTED_MODULE_4__[\"second\"]);\n    }\n    render() {\n        return (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](\"div\", { className: \"settings-component p-15 p-l-10 p-r-10\" },\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`General Setting`) },\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](SettingInputComponent, { element: react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Language\"), options: [\n                            { key: \"en\", text: \"English\" },\n                            { key: \"ar\", text: \"العربية\" }\n                        ], defaultSelectedKey: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"lang\"), onChange: (ev, v) => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"lang\", v.key.toString());\n                        }, disabled: !this.canEdit }), info: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`Choose the main language of display menus and items `) }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](SettingInputComponent, { element: react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Date format\"), options: [\n                            { key: \"dd/mm/yyyy\", text: \"dd/mm/yyyy\" },\n                            { key: \"mm/dd/yyyy\", text: \"mm/dd/yyyy\" },\n                            { key: \"dd MM 'YY\", text: \"dd MM 'YY\" },\n                        ], defaultSelectedKey: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"date_format\"), onChange: (ev, v) => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"date_format\", v.key.toString());\n                        }, disabled: !this.canEdit }), info: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`Set the date format to be used across this application`) }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](SettingInputComponent, { element: react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Dropdown\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Week ends on\"), options: _utils__WEBPACK_IMPORTED_MODULE_4__[\"dateNames\"].days(true).map((dayName, index) => ({\n                            key: index.toString(),\n                            text: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(dayName),\n                        })), defaultSelectedKey: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"weekend_num\"), onChange: (ev, v) => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"weekend_num\", v.key.toString());\n                        }, disabled: !this.canEdit }), info: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`On which day the week ends`) })),\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`Financial Settings`) },\n                _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"time_tracking\") ? (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](SettingInputComponent, { element: react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time expenses (per hour)\"), type: \"number\", value: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"hourlyRate\"), onChange: (ev, newVal) => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"hourlyRate\", newVal.toString());\n                        }, disabled: !this.canEdit }), info: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\n                    // tslint:disable-next-line:max-line-length\n                    `When time tracking enabled, this is used to calculate profits and expenses, as time is also added to the expenses So here you can put the electricity, rent, and other time dependent expenses`) })) : (\"\"),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](SettingInputComponent, { element: react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"TextField\"], { label: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Currency symbol\"), value: _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"currencySymbol\"), onChange: (ev, newVal) => {\n                            _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"currencySymbol\", newVal.toString());\n                        }, disabled: !this.canEdit }), info: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`This symbol you enter here will be used across your application`) })),\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"SectionComponent\"], { title: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(`Optional Modules and Features`) },\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Prescriptions module enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Prescriptions module disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_prescriptions\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"module_prescriptions\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Statistics module enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Statistics module disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_statistics\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"module_statistics\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Insurance  module enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Insurance module disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_insurance\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"module_insurance\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time tracking enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Time tracking disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"time_tracking\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"time_tracking\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Consents enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Consents tracking disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_consents\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"module_consents\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }),\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"Toggle\"], { onText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Instructions enabled\"), offText: Object(_core__WEBPACK_IMPORTED_MODULE_2__[\"text\"])(\"Instructions module disabled\"), defaultChecked: !!_modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].getSetting(\"module_instructions\"), onChange: (ev, val) => {\n                        _modules__WEBPACK_IMPORTED_MODULE_3__[\"setting\"].setSetting(\"module_instructions\", val ? \"enable\" : \"\");\n                    }, disabled: !this.canEdit }))));\n    }\n};\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], SettingsPage.prototype, \"triggerUpdate\", void 0);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], SettingsPage.prototype, \"inputEl\", void 0);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"computed\"]\n], SettingsPage.prototype, \"canEdit\", null);\nObject(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx__WEBPACK_IMPORTED_MODULE_5__[\"observable\"]\n], SettingsPage.prototype, \"loading\", void 0);\nSettingsPage = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx_react__WEBPACK_IMPORTED_MODULE_6__[\"observer\"]\n], SettingsPage);\n\nlet SettingInputComponent = class SettingInputComponent extends react__WEBPACK_IMPORTED_MODULE_8__[\"Component\"] {\n    render() {\n        return (react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Row\"], { gutter: 12, style: { marginBottom: 20 } },\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { style: { marginBottom: -15 }, md: 12 }, this.props.element),\n            react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](_common_components__WEBPACK_IMPORTED_MODULE_1__[\"Col\"], { md: 12 },\n                react__WEBPACK_IMPORTED_MODULE_8__[\"createElement\"](office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBar\"], { style: { marginTop: 22 }, messageBarType: office_ui_fabric_react__WEBPACK_IMPORTED_MODULE_7__[\"MessageBarType\"].info }, this.props.info))));\n    }\n};\nSettingInputComponent = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"])([\n    mobx_react__WEBPACK_IMPORTED_MODULE_6__[\"observer\"]\n], SettingInputComponent);\n\n/***\n *   <SectionComponent title={text(`Backup and Restore`)}>\n          \n            <div>\n              \n              <DefaultButton\n                onClick={() => {\n                  compact.compact();\n                }}\n                iconProps={{ iconName: \"ZipFolder\" }}\n                className=\"m-l-5 m-t-5\"\n                text={text(\"Run compaction\")}\n              />\n\n              <DefaultButton\n                onClick={() => {\n                  downloadCurrent();\n                }}\n                className=\"m-l-5 m-t-5\"\n                iconProps={{ iconName: \"Database\" }}\n                text={text(\"Download a backup\")}\n              />\n\n              <DefaultButton\n                onClick={() => (this.inputEl ? this.inputEl.click() : \"\")}\n                className=\"m-l-5 m-t-5\"\n                iconProps={{ iconName: \"DatabaseSync\" }}\n                text={text(\"Restore from file\")}\n              />\n              <input\n                ref={(el) => (this.inputEl = el)}\n                hidden\n                type=\"file\"\n                multiple={false}\n                onChange={async (e) => {\n                  if (e.target.files && e.target.files.length > 0) {\n                    await restore.fromFile(e.target.files[0]);\n                  }\n                }}\n              />\n            </div>\n          \n\n           (\n              <MessageBar messageBarType={MessageBarType.warning}>\n                {text(\n                  \"Backup and restore functionality are not available while you're offline\"\n                )}\n              </MessageBar>\n            )\n        </SectionComponent>\n *\n */ \n\n\n//# sourceURL=webpack:///./src/modules/settings/components/page.settings.tsx?");

/***/ })

}]);